<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

	{% include head.html %}

<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">

	{% include navigation.html %}
	{% include header.html %}

  {% for page in site.pages %}
    {% if page.section-type == "default" %}
      <!-- {{ page.title }} Section -->
      <section id="{{ page.title }}" class="container content-section text-center">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2">
                {{ page.content | markdownify }}
              </div>
          </div>
      </section>
    {% elsif page.section-type == "contact" %}
      <!-- {{ page.title }} Section -->
      <section id="{{ page.title }}" class="container content-section text-center">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2">
                {{ page.content | markdownify }}

                {% if page.email %}
                <p><a href="mailto:{{ page.email }}">{{ page.email }}</a></p>
                {% endif %}
                <ul class="list-inline social-buttons">
                    {% for network in page.social %}
                    <li><a href="{{ network.url }}"><i class="fa fa-{{ network.title }} fa-fw"></i></a></li>
                    {% endfor %}
                </ul>
              </div>
          </div>
      </section>
    {% elsif page.section-type == "blog" %}
      <!-- {{ page.title }} Section -->
      <section id="{{ page.title }}" class="container content-section text-center">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2">
                {{ page.content | markdownify }}

                {% if page.blog %}
                <p>Check out <a href="{{ page.blog }}">my movie review blog.</a></p>
                {% endif %}
              </div>
          </div>
      </section>
    {% elsif page.section-type == "travel" %}
      <!-- {{ page.title }} Section -->
      <section id="{{ page.title }}" class="container content-section">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2">
            <div class="text-center">
              {{ page.content | markdownify }}
            </div>
            <ul>
              {% for post in site.posts %}
                {% if post.type == "travel" %}
                  <li>
                    <div>
                      <h4>{{ post.date | date: "%b %-d, %Y" }}</h4>
                      <h4>{{post.title}}</h4>
                      <h4>{{post.nOfImages}}</h4>
                      <br>
                      <div id="myGallery" ng-repeat="n in [] | range:"+{{post.nOfImages}}>
                        <?php
                        $directory = {{post.directory}};	//where the gallery images are located

                        $allowed_types=array('jpg','jpeg','gif','png');	//allowed image types

                        $file_parts=array();
                        $ext='';
                        $title='';
                        $i=0;

                        //try to open the directory
                        $dir_handle = @opendir($directory) or die("There is an error with your image directory!");
                        echo '
                        <div class="pic '.$nomargin.'" style="no-repeat 50% 50%;">
                        ';
                        while ($file = readdir($dir_handle))	//traverse through the files
                        {
                          if($file=='.' || $file == '..') continue;	//skip links to the current and parent directories

                          $file_parts = explode('.',$file);	//split the file name and put each part in an array
                          $ext = strtolower(array_pop($file_parts));	//the last element is the extension

                          $title = implode('.',$file_parts);	//once the extension has been popped out, all that is left is the file name
                          $title = htmlspecialchars($title);	//make the filename html-safe to prevent potential security issues

                          $nomargin='';
                          if(in_array($ext,$allowed_types))	//if the extension is an allowable type
                          {
                            if(($i+1)%4==0) $nomargin='nomargin';	//the last image on the row is assigned the CSS class "nomargin"
                            echo '
                              <a href="'.$directory.'/'.$file.'">
                                <img alt="'.$title.'" src="'.$directory.'/'.$file.'"/>
                              </a>
                            ';

                            $i++;	//increment the image counter
                          }
                        }
                        echo '
                        </div>';

                        closedir($dir_handle);
                        ?>
                      </div>
                      <br>
                    </div>
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
          </div>
        </div>
      </section>
      <a href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a>
    {% elsif page.section-type == "timeline" %}
      <!-- {{ page.title }} Section -->
      <section id="{{ page.title }}" class="container content-section text-center">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2">
                {{ page.content | markdownify }}
                <ul class="timeline">
                {% for post in site.posts %}
                  {% if post.type == "career" %}
                    <li class="timeline-inverted">
                        <div class="timeline-image">
                            <img class="img-circle img-responsive" src="{{ site.baseurl }}/{% if post.image %}{{ post.image }}{% else %}{{site.career-img}}{% endif %}" alt="">
                        </div>

                        <div class="timeline-panel">
                            <div class="timeline-heading">
                                <h4>{{ post.title }}</h4>
                                <h4 class="subheading">{{ post.subtitle }}</h4>
                            </div>
                            <div class="timeline-body">
                                <p class="text-muted"><font face="lato" size=3px>{{ post.content }}</font></p>
                            </div>
                        </div>
                    </li>
                  {% endif %}
                {% endfor %}

                  <li class="timeline-inverted">
                    <div class="timeline-image">
                      <img class="img-circle img-responsive" src="{{ site.baseurl }}/{{ site.career-img }}" alt="">
                    </div>
                  </li>

                </ul>

              </div>
          </div>
      </section>

    {% endif %}
  {% endfor %}

	{% include footer.html %}
	{% include js.html %}

  <script>
  $("#myGallery").justifiedGallery();
  </script>

</body>
</html>
